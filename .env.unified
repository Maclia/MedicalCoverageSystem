# Medical Coverage System Unified Environment Configuration
# This file contains all environment variables for both main and finance services

# =============================================================================
# GENERAL CONFIGURATION
# =============================================================================

# Environment
NODE_ENV=production

# Application URLs and Ports
PORT=3000
FRONTEND_PORT=3000
BACKEND_PORT=3001
FINANCE_PORT=5000
HTTP_PORT=80
HTTPS_PORT=443
REDIS_PORT=6379
PROMETHEUS_PORT=9090

# Application Domains
CORS_ORIGIN=http://localhost:3000
DOMAIN=localhost
API_DOMAIN=localhost
FINANCE_DOMAIN=finance.localhost
ADMIN_DOMAIN=admin.localhost

# =============================================================================
# DATABASE CONFIGURATION (Unified PostgreSQL)
# =============================================================================

# PostgreSQL Settings
POSTGRES_HOST=postgres-unified
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_postgres_password_change_in_production
POSTGRES_DB=medical_coverage
POSTGRES_MULTIPLE_DATABASES=medical_coverage_finance
POSTGRES_HOST_AUTH_METHOD=scram-sha-256

# Database URLs
DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres-unified:5432/${POSTGRES_DB}
FINANCE_DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres-unified:5432/medical_coverage_finance

# Database Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=60000

# =============================================================================
# REDIS CONFIGURATION (Unified Redis)
# =============================================================================

# Redis Settings
REDIS_HOST=redis-unified
REDIS_PORT=6379
REDIS_PASSWORD=your_secure_redis_password_change_in_production
REDIS_KEY_PREFIX=medcoverage:

# Connection Settings
REDIS_DB=0
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_RETRY_ATTEMPTS=3
REDIS_RETRY_DELAY=1000

# Finance Service Redis Settings
FINANCE_REDIS_DB=1
FINANCE_REDIS_KEY_PREFIX=finance:

# Session Management
SESSION_REDIS_DB=2
SESSION_REDIS_KEY_PREFIX=session:
SESSION_SECRET=your_session_secret_change_in_production

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Settings
JWT_SECRET=your_super_secure_jwt_secret_key_change_in_production_at_least_32_characters
JWT_REFRESH_SECRET=your_super_secure_refresh_secret_key_change_in_production_at_least_32_characters
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Bcrypt Settings
BCRYPT_ROUNDS=12
BCRYPT_SALT_ROUNDS=12

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# CORS Settings
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin,User-Agent,DNT,Cache-Control,X-Mx-ReqToken,Keep-Alive,X-Requested-With,If-Modified-Since

# =============================================================================
# FILE UPLOAD & STORAGE
# =============================================================================

# File Upload Settings
UPLOAD_DIR=uploads
MAX_FILE_SIZE=10485760  # 10MB
MAX_FILES_PER_UPLOAD=5
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx,txt,csv,xls,xlsx

# Storage Settings
STORAGE_TYPE=local  # local, aws-s3, google-cloud, azure
STORAGE_BUCKET=medical-coverage-files
STORAGE_REGION=us-east-1

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@medicalcoverage.com
SMTP_FROM_NAME=Medical Coverage System

# Email Templates
EMAIL_TEMPLATES_DIR=emailTemplates
EMAIL_TEMPLATE_CACHE=true

# =============================================================================
# FINANCE SERVICE CONFIGURATION
# =============================================================================

# Finance Service Controls
FINANCE_SERVICES_ENABLED=true
BILLING_SERVICE_ENABLED=true
PAYMENT_SERVICE_ENABLED=true
COMMISSION_SERVICE_ENABLED=true
CLAIMS_FINANCIAL_SERVICE_ENABLED=true

# Payment Gateway Configuration
PAYMENT_GATEWAY=stripe  # stripe, paypal, square, authorize.net
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# PayPal Configuration
PAYPAL_MODE=sandbox
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret

# Billing Configuration
BILLING_CURRENCY=USD
BILLING_TAX_RATE=0.08  # 8%
BILLING_LATE_FEE_RATE=0.02  # 2%
BILLING_GRACE_PERIOD_DAYS=30

# Claims Configuration
CLAIMS_AUTO_PROCESS_ENABLED=true
CLAIMS_PROCESSING_BATCH_SIZE=50
CLAIMS_RETRY_ATTEMPTS=3
CLAIMS_RETRY_DELAY_HOURS=24

# Commission Configuration
COMMISSION_CALCULATION_SCHEDULE=0 2 * * *  # Daily at 2 AM
COMMISSION_PAYMENT_SCHEDULE=0 9 1 * *  # Monthly on 1st at 9 AM
COMMISSION_MINIMUM_PAYOUT_AMOUNT=50.00

# Financial Reports
FINANCIAL_REPORTS_ENABLED=true
FINANCIAL_REPORTS_SCHEDULE=0 8 1 * *  # Monthly on 1st at 8 AM
FINANCIAL_REPORTS_RETENTION_DAYS=365

# Finance API Keys
FINANCE_API_KEY=your_finance_api_key_change_in_production
FINANCE_WEBHOOK_SECRET=your_finance_webhook_secret_change_in_production

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Log Configuration
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE_ENABLED=true
LOG_FILE_MAX_SIZE=10m
LOG_FILE_MAX_FILES=5
LOG_FILE_ROTATION=true

# Application Logs Directory
LOGS_DIR=logs
FINANCE_LOGS_DIR=logs/finance

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60

# Metrics Configuration
METRICS_ENABLED=true
METRICS_PATH=/metrics
METRICS_PORT=9100

# =============================================================================
# NOTIFICATIONS & ALERTS
# =============================================================================

# Slack Integration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#alerts
SLACK_USERNAME=Medical Coverage Bot
SLACK_ICON_EMOJI=:hospital:

# Email Alerts
EMAIL_ALERTS_ENABLED=true
EMAIL_ALERTS_TO=admin@medicalcoverage.com,ops@medicalcoverage.com
EMAIL_ALERTS_FROM=alerts@medicalcoverage.com

# SMS Alerts (Optional)
SMS_ALERTS_ENABLED=false
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true

# Backup Storage
BACKUP_STORAGE_TYPE=local  # local, aws-s3, google-cloud, azure
BACKUP_STORAGE_PATH=backups
BACKUP_STORAGE_BUCKET=medical-coverage-backups
BACKUP_STORAGE_REGION=us-east-1

# Disaster Recovery
DR_ENABLED=false
DR_REPLICATION_REGION=us-west-2
DR_RPO_MINUTES=15
DR_RTO_MINUTES=60

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Development Settings
GENERATE_SOURCEMAP=false
DEBUG_MODE=false
HOT_RELOAD=false

# Test Configuration
TEST_DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres-unified:5432/medical_coverage_test
TEST_REDIS_URL=redis://redis-unified:6379/1

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
SLOW_QUERY_THRESHOLD_MS=1000
PROFILING_ENABLED=false

# =============================================================================
# DOCKER & DEPLOYMENT
# =============================================================================

# Docker Configuration
DOCKER_REGISTRY=
TAG=latest
WORKER_REPLICAS=2
WORKER_CONCURRENCY=5

# Deployment Settings
DEPLOYMENT_TIMEOUT_SECONDS=600
HEALTH_CHECK_WAIT_SECONDS=90
GRACEFUL_SHUTDOWN_TIMEOUT_SECONDS=30

# Rollback Configuration
ROLLBACK_ENABLED=true
ROLLBACK_MAX_VERSIONS=5
ROLLBACK_HEALTH_CHECK_TIMEOUT_SECONDS=120

# =============================================================================
# NETWORKING & SECURITY
# =============================================================================

# SSL/TLS Configuration
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/cert.pem
SSL_KEY_PATH=/etc/ssl/private/key.pem
SSL_CA_PATH=/etc/ssl/certs/ca.pem

# Security Headers
HELMET_ENABLED=true
CSP_ENABLED=true
CSP_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' ws: wss:;

# IP Security
IP_WHITELIST_ENABLED=false
IP_WHITELIST=127.0.0.1,::1
IP_RATE_LIMIT_ENABLED=true
IP_RATE_LIMIT_MAX_REQUESTS=1000
IP_RATE_LIMIT_WINDOW_MS=3600000  # 1 hour

# =============================================================================
# INTEGRATION & THIRD-PARTY SERVICES
# =============================================================================

# External APIs
EXTERNAL_API_TIMEOUT_MS=30000
EXTERNAL_API_RETRY_ATTEMPTS=3
EXTERNAL_API_RETRY_DELAY_MS=1000

# Insurance Provider APIs
INSURANCE_BLUE_CROSS_API_KEY=your_blue_cross_api_key
INSURANCE_BLUE_CROSS_API_URL=https://api.bluecross.com
INSURANCE_AETNA_API_KEY=your_aetna_api_key
INSURANCE_AETNA_API_URL=https://api.aetna.com
INSURANCE_CIGNA_API_KEY=your_cigna_api_key
INSURANCE_CIGNA_API_URL=https://api.cigna.com

# Credit Check Services (Optional)
CREDIT_CHECK_ENABLED=false
CREDIT_CHECK_API_KEY=your_credit_check_api_key
CREDIT_CHECK_PROVIDER=experian

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Main Application Features
FEATURE_MULTI_TENANCY=false
FEATURE_APPOINTMENT_REMINDERS=true
FEATURE_PATIENT_PORTAL=true
FEATURE_TELEHEALTH=false
FEATURE_MOBILE_APP=false

# Finance Service Features
FEATURE_AUTO_BILLING=true
FEATURE_INSURANCE_VERIFICATION=true
FEATURE_PAYMENT_PLANS=true
FEATURE_FINANCIAL_DASHBOARD=true
FEATURE_ADVANCED_REPORTING=true

# Experimental Features
EXPERIMENTAL_AI_DIAGNOSIS=false
EXPERIMENTAL_PREDICTIVE_ANALYTICS=false
EXPERIMENTAL_VOICE_RECOGNITION=false

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================

# Caching Configuration
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE_MB=100
CACHE_COMPRESSION_ENABLED=true

# Connection Pooling
HTTP_KEEP_ALIVE_TIMEOUT=5000
HTTP_MAX_SOCKETS=1000
HTTP_MAX_FREE_SOCKETS=256

# Background Jobs
JOB_QUEUE_CONCURRENCY=10
JOB_RETRY_ATTEMPTS=3
JOB_RETRY_DELAY_MS=5000
JOB_TIMEOUT_MS=300000  # 5 minutes

# =============================================================================
# LEGAL & COMPLIANCE
# =============================================================================

# HIPAA Compliance
HIPAA_ENABLED=true
HIPAA_AUDIT_LOGGING=true
HIPAA_DATA_ENCRYPTION=true
HIPAA_ACCESS_LOGGING=true

# GDPR Compliance
GDPR_ENABLED=true
GDPR_DATA_RETENTION_DAYS=2555  # 7 years
GDPR_ANONYMIZATION_ENABLED=true

# Legal Information
LEGAL_COMPANY_NAME=Medical Coverage Systems Inc.
LEGAL_ADDRESS=123 Medical Plaza, Health City, HC 12345
LEGAL_PHONE=+1-555-MEDICAL
LEGAL_EMAIL=legal@medicalcoverage.com
LEGAL_WEBSITE=https://medicalcoverage.com

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Application Monitoring
APP_MONITORING_ENABLED=true
APP_MONITORING_SAMPLE_RATE=1.0
APP_MONITORING_PROFILING_ENABLED=false

# Error Tracking
ERROR_TRACKING_ENABLED=true
ERROR_TRACKING_SAMPLE_RATE=1.0
ERROR_TRACKING_IGNORE_ENVIRONMENTS=development,test

# Distributed Tracing
DISTRIBUTED_TRACING_ENABLED=true
DISTRIBUTED_TRACING_SAMPLE_RATE=0.1

# Metrics Collection
METRICS_COLLECTION_INTERVAL_MS=60000
METRICS_RETENTION_DAYS=30

# =============================================================================
# CUSTOMIZATION & BRANDING
# =============================================================================

# Branding
APP_NAME=Medical Coverage System
APP_DESCRIPTION=Comprehensive medical coverage and financial management
APP_VERSION=3.0.0
APP_LOGO_URL=/assets/logo.png
APP_FAVICON_URL=/assets/favicon.ico

# Theme Configuration
THEME_PRIMARY_COLOR=#007bff
THEME_SECONDARY_COLOR=#6c757d
THEME_SUCCESS_COLOR=#28a745
THEME_WARNING_COLOR=#ffc107
THEME_DANGER_COLOR=#dc3545
THEME_INFO_COLOR=#17a2b8

# Email Branding
EMAIL_HEADER_LOGO=https://medicalcoverage.com/assets/email-logo.png
EMAIL_FOOTER_TEXT=Â© 2024 Medical Coverage Systems Inc. All rights reserved.
EMAIL_UNSUBSCRIBE_URL=https://medicalcoverage.com/unsubscribe